<?xml version='1.0' encoding='UTF-8'?>
<odoo>
    <record id="customer_order_view_tree" model="ir.ui.view">
        <field name="name">customer.order.tree</field>
        <field name="model">customer.order</field>
        <field name="arch" type="xml">
            <list decoration-success="status == 'available'"
                  decoration-info="status == 'on_order'"
                  decoration-danger="status == 'unordered'">
                <header>
                    <button name="action_create_po" type="object" string="Order" class="btn-primary"/>
                </header>
                <field name="partner_id" string="Customer"/>
                <field name="sale_order_id" string="Sale Order"/>
                <field name="product_id"/>
                <field name="qty_ordered"/>
                <field name="qty_delivered"/>
                <field name="qty_to_deliver"/>
                <field name="seller_id" string="Vendor"/>
                <field name="status" widget="badge"
                    decoration-success="status == 'available'"
                    decoration-info="status == 'on_order'"
                    decoration-danger="status == 'unordered'"/>
            </list>
        </field>
    </record>

    <record id="customer_order_view_search" model="ir.ui.view">
        <field name="name">customer.order.search</field>
        <field name="model">customer.order</field>
        <field name="arch" type="xml">
            <search>
                <field name="product_id"/>
                <field name="partner_id"/>
                <field name="sale_order_id"/>
                <field name="seller_id"/>
                <separator/>
                <filter name="filter_unordered" string="Unordered" domain="[('status', '=', 'unordered')]"/>
                <filter name="filter_on_order" string="On Order" domain="[('status', '=', 'on_order')]"/>
                <filter name="filter_available" string="Available" domain="[('status', '=', 'available')]"/>
                <separator/>
                <group expand="0" string="Group By">
                    <filter name="group_customer" string="Customer" context="{'group_by': 'partner_id'}"/>
                    <filter name="group_vendor" string="Vendor" context="{'group_by': 'seller_id'}"/>
                    <filter name="group_status" string="Status" context="{'group_by': 'status'}"/>
                </group>
            </search>
        </field>
    </record>

    <record id="action_customer_order" model="ir.actions.act_window">
        <field name="name">Customer Orders</field>
        <field name="res_model">customer.order</field>
        <field name="view_mode">list</field>
        <field name="search_view_id" ref="customer_order_view_search"/>
    </record>

    <menuitem id="menu_customer_orders"
        name="Customer Orders"
        parent="stock.menu_stock_procurement"
        action="action_customer_order"
        sequence="10"/>
</odoo>
